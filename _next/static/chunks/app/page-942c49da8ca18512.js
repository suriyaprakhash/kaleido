(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4447:function(e,t,n){Promise.resolve().then(n.bind(n,9109))},9109:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(7437),a=n(2265);class s{}class l extends s{convert(e){let t=[],n=[],r=[],a=new Map(Object.entries(e.contexts)),s=new Map,l=0;return a.forEach((e,a)=>{let o=new Map(Object.entries(e.beans));o.forEach((e,a)=>{var i;l+=1,s.has(e.type)?s.get(e.type):s.set(e.type,l+1),t.push({id:a,group:s.get(e.type)}),null===(i=e.dependencies)||void 0===i||i.forEach(e=>{o.get(e)&&o.get(a)?n.push({source:e,target:a,value:1}):(console.error("Missing dependency node - "+e+" or bean Node -"+a),r.push({source:e,target:a,value:1}))})})}),{links:n,nodes:t,missingLinks:r}}}var o=n(9944),i=e=>{var t;let{jsonData:n}=e,s=(0,a.useRef)(!1),[l,i]=(0,a.useState)(n),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(!0),p=(0,a.useRef)(null);function x(e){"Clear Selection"===e.target.textContent?d(""):d(e.target.textContent)}function g(e){let t=n.nodes.filter(e=>e.id.toLocaleLowerCase().includes(c.toLocaleLowerCase())).map(e=>e),r=new Map;if(n.nodes.forEach(e=>r.set(e.id,e)),(null==t?void 0:t.length)>0){let e=n.links.filter(e=>t.filter(t=>e.source===t.id).length>0).map(e=>e),a=e.map(e=>r.get(e.target)),s=new Set;a.forEach(e=>{e&&s.add(e)}),t.forEach(e=>{s.add(e)}),i({nodes:Array.from(s),links:e})}else i({nodes:[],links:[]});s.current=!1}return(0,a.useEffect)(()=>{if(console.log("use Effects called"),!s.current){var e;console.log("use Effects called - init"),null===(e=o.td_("g"))||void 0===e||e.remove(),function(e){let t;let n=e.jsonData,r=e.svgRef,a=e.svgRefElementString;t=r?o.Ys(r.current):o.Ys(a);let s=e.width?e.width:1600,l=e.height?e.height:1200;t.attr("width",s).attr("height",l).attr("viewBox",[0,0,s,l]).attr("style","max-width: 100%; height: auto");let i=o.PKp(o.Cn1),c=n.links.map(e=>({...e})),d=n.nodes.map(e=>({...e})),u=t.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll().data(c).join("line").attr("stroke-width",e=>Math.sqrt(e.value)),h=t.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll().data(d).join("circle").attr("r",5).attr("fill",e=>i(e.group+""));h.append("title").text(e=>e.id);let p=o.A4v(d).force("link",o.Fsl(c).id(e=>e.id)).force("charge",o.q5i()).force("center",o.wqt(s/2,l/2)).on("tick",function(){u.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),h.attr("cx",e=>e.x?e.x:0).attr("cy",e=>e.y?e.y:0)}),x=o.sPX();x.on("zoom",function(e){h.attr("transform",e.transform),u.attr("transform",e.transform)}),t.call(x).append("g"),t.transition().duration(750).call(x.transform,o.CRH);let g=o.ohM();g.on("start",e=>{e.active||p.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y}).on("drag",e=>{e.subject.fx=e.x,e.subject.fy=e.y}).on("end",e=>{e.active||p.alphaTarget(0),e.subject.fx=null,e.subject.fy=null}),h.call(g)}({jsonData:l,svgRef:p}),s.current=!0}},[l]),(0,r.jsx)("section",{className:"",children:(0,r.jsxs)("section",{className:"grid gap-6 p-2 sm:grid-cols-4",children:[(0,r.jsxs)("div",{className:"sm:col-span-1 grid grid-cols-2 p-4 shadow-[0_3px_10px_rgb(0,0,0,0.2)]",children:[(0,r.jsx)("div",{className:"col-span-2 text-center text-xl text-gray-500",children:"Graph Search"}),(0,r.jsx)("div",{className:"col-span-2 pt-3",children:(0,r.jsx)("input",{className:"border-2 border-orange-600 w-full rounded-md h-10 p-4",placeholder:"search",value:c,onChange:function(e){d(e.target.value)}})}),(0,r.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-2 pt-2 max-h-[100px]",children:[(0,r.jsx)("button",{className:"col-span-1 bg-orange-600 rounded-lg hover:bg-orange-800",onClick:g,children:(0,r.jsx)("span",{className:"text-white",children:"Filter Depandents"})}),(0,r.jsx)("button",{className:"col-span-1 bg-orange-600 rounded-lg hover:bg-orange-800",onClick:function(e){let t=n.nodes.filter(e=>e.id.toLocaleLowerCase().includes(c.toLocaleLowerCase())).map(e=>e),r=new Map;if(n.nodes.forEach(e=>r.set(e.id,e)),(null==t?void 0:t.length)>0){let e=n.links.filter(e=>t.filter(t=>e.target===t.id).length>0).map(e=>e),a=e.map(e=>r.get(e.source)),s=new Set;a.forEach(e=>{e&&s.add(e)}),t.forEach(e=>{s.add(e)}),i({nodes:Array.from(s),links:e})}else i({nodes:[],links:[]});s.current=!1},children:(0,r.jsx)("span",{className:"p-2 text-white",children:"Filter Child"})})]}),n.missingLinks&&(0,r.jsx)("div",{className:"col-span-2 text-center hidden md:block",children:(0,r.jsxs)("div",{className:"pt-5",children:[(0,r.jsx)("div",{onClick:function(){h(!u)},className:"cursor-pointer hover:text-orange-300",children:"Show/hide missing links"}),u&&(0,r.jsx)("ul",{className:"list-disc overflow-y-auto h-56 shadow-[inset_-12px_-8px_40px_#46464620] text-sm m-3",children:null===(t=n.missingLinks)||void 0===t?void 0:t.map(e=>(0,r.jsx)("li",{className:"p-3 text-gray-400 hover:text-orange-300",children:(0,r.jsxs)("span",{children:[e.source," - ",e.target]})},e.source))})]})})]}),(0,r.jsx)("div",{className:"sm:col-span-2 rounded-lg",children:(0,r.jsx)("svg",{ref:p,className:"shadow-[0_3px_10px_rgb(0,0,0,0.2)] rounded-lg"})}),(0,r.jsxs)("div",{className:"sm:col-span-1 shadow-[0_3px_10px_rgb(0,0,0,0.2)] grid grid-cols-2 p-4",children:[(0,r.jsx)("div",{className:"text-center col-span-2 text-xl text-gray-400",children:"Data Window"}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-sm text-orange-600",children:"Nodes found "}),l.nodes.length]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-sm text-orange-600",children:"Links found "})," ",l.links.length]})]}),(0,r.jsxs)("div",{className:"col-span-2 hidden md:block",children:[(0,r.jsx)("h3",{className:"text-sm text-gray-700",children:"Select from available nodes"}),(0,r.jsx)("ul",{className:"list-disc overflow-y-auto h-56 shadow-[inset_-12px_-8px_40px_#46464620] text-sm m-3",children:l.nodes.map(e=>(0,r.jsx)("li",{className:"p-3 text-gray-400 cursor-pointer hover:text-orange-300",onClick:e=>g(e),children:(0,r.jsx)("span",{onMouseEnter:x,children:e.id})},e.id))})]}),(0,r.jsx)("div",{className:"col-span-2 grid grid-cols-2 gap-2",children:(0,r.jsx)("button",{className:"col-span-2 border-2 border-orange-400 rounded-lg hover:bg-orange-500 pl-4 pr-4",onMouseEnter:x,onClick:e=>{d(""),g(e)},children:(0,r.jsx)("span",{className:"p-2 text-gray-700 hover:text-white",children:"Clear Selection"})})})]})]})})};class c extends s{convert(e){let t={name:"contexts",children:[]};return new Map(Object.entries(e.contexts)).forEach((e,n)=>{let r={name:n,children:[]},a=new Map(Object.entries(e.beans));a.forEach((e,t)=>{let n={name:t,children:d(a,e)};r.children.push(n)}),t.children.push(r)}),t}}function d(e,t){let n=[];return null==t||t.dependencies.forEach(t=>{let r={name:t,children:d(e,e.get(t))};n.push(r)}),n}var u=e=>{let{convertedJsonData:t,actualJsonData:n}=e,s=(0,a.useRef)(!1),[l,i]=(0,a.useState)(t),[c,u]=(0,a.useState)(""),h=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(console.log("use Effects called"),!s.current){var e;console.log("use Effects called - init"),null===(e=o.td_("svg g"))||void 0===e||e.remove(),function(e){let t;let n=e.jsonData,r=e.svgRef,a=e.svgRefElementString,s="sans-serif";t=r?o.Ys(r.current):o.Ys(a);let l=o.PKp(o.Cn1),i=o.bT9(n),c=o.ki8().nodeSize([30,300]);i.sort((e,t)=>o.j2p(e.data.name,t.data.name)),c(i),t.attr("width",1600).attr("height",800).attr("viewBox",[-100,-10,1600,30]).attr("style","max-width: 100%; height: auto; font: 12px "+s+";");let d=o.h5h().x(e=>e.y).y(e=>e.x),u=t.append("g"),h=u.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5),p=u.append("g").attr("cursor","pointer").attr("pointer-events","all");i.x0=150,i.y0=0,i.descendants().forEach((e,t)=>{e.id=t,e._children=e.children,e.depth&&7!==e.data.name.length&&(e.children=null)}),function e(n,r){let a=(null==n?void 0:n.altKey)?2500:250,u=i.descendants().reverse(),x=i.links();c(i);let g=i,f=i;i.eachBefore(e=>{e.x<g.x&&(g=e),e.x>f.x&&(f=e)});let m=f.x-g.x+10+10,v=t.transition().duration(a).attr("height",800).attr("viewBox",[-100,g.x-10,1600,m]).tween("resize",function(){window.ResizeObserver||(()=>()=>t.dispatch("toggle"))}),j=p.selectAll("g").data(u,e=>e.id),w=j.enter().append("g").attr("transform",e=>"translate(".concat(r.y0,",").concat(r.x0,")")).attr("fill-opacity",0).attr("stroke-opacity",0).on("click",(t,n)=>{n.children=n.children?null:n._children,e(t,n)});w.append("circle").attr("r",2.5).attr("fill",e=>e._children?l(e.depth+""):"#999").attr("stroke-width",10).on("mouseover",function(e,t){t._children&&o.Ys(this).transition().duration(3).attr("r",5)}).on("mouseout",function(e,t){t._children&&o.Ys(this).transition().duration(2).attr("r",2.5)}),w.append("text").attr("dy","0.31em").attr("x",e=>e._children?-6:6).attr("text-anchor",e=>e._children?"end":"start").text(e=>e.data.name).attr("stroke-linejoin","round").attr("stroke-width",3).attr("stroke","white").attr("paint-order","stroke").on("mouseover",function(e,t){t._children&&o.Ys(this).transition().duration(3).attr("style","font: 15px "+s+";")}).on("mouseout",function(e,t){t._children&&o.Ys(this).transition().duration(2).attr("style","font: 12px "+s+";")}),j.merge(w).transition(v).attr("transform",e=>"translate(".concat(e.y,",").concat(e.x,")")).attr("fill-opacity",1).attr("stroke-opacity",1),j.exit().transition(v).remove().attr("transform",e=>"translate(".concat(r.y,",").concat(r.x,")")).attr("fill-opacity",0).attr("stroke-opacity",0);let b=h.selectAll("path").data(x,e=>e.target.id),y=b.enter().append("path").attr("d",e=>{let t={x:r.x0,y:r.y0};return d({source:t,target:t})}).on("mouseover",function(e,t){o.Ys(this).transition().duration(3).attr("stroke-width",3)}).on("mouseout",function(e,t){o.Ys(this).transition().duration(2).attr("stroke-width",1.5)});b.merge(y).transition(v).attr("d",d),b.exit().transition(v).remove().attr("d",e=>{let t={x:r.x,y:r.y};return d({source:t,target:t})}),i.eachBefore(e=>{e.x0=e.x,e.y0=e.y})}(null,i);let x=o.sPX();x.on("zoom",function(e){u.attr("transform",e.transform)}),t.call(x),t.transition().duration(750).call(x.transform,o.CRH)}({jsonData:l,svgRef:h}),s.current=!0}},[l]),(0,r.jsx)("section",{className:"",children:(0,r.jsxs)("section",{className:"grid gap-4 p-2 sm:grid-cols-4",children:[(0,r.jsxs)("div",{className:"sm:col-span-1 grid grid-cols-2 p-4 shadow-[0_3px_10px_rgb(0,0,0,0.2)] h-[250px] sm:h-[350px]",children:[(0,r.jsx)("div",{className:"col-span-2 text-center text-xl text-gray-500",children:"Tree Search"}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)("input",{className:"border-2 border-orange-600 w-full rounded-md h-10 p-4",placeholder:"search",onChange:function(e){u(e.target.value)}})}),(0,r.jsx)("div",{className:"col-span-2 grid grid-cols-2 p-2",children:(0,r.jsx)("button",{className:"col-span-2 bg-orange-600 rounded-lg hover:bg-orange-800",onClick:function(e){i(function(e,t){let n={name:"contexts",children:[]};return new Map(Object.entries(e.contexts)).forEach((e,r)=>{let a={name:r,children:[]},s=new Map(Object.entries(e.beans));s.forEach((e,n)=>{if(n.toLocaleLowerCase().includes(null==t?void 0:t.toLocaleLowerCase())){let t={name:n,children:d(s,e)};a.children.push(t)}}),n.children.push(a)}),n}(n,c)),s.current=!1},children:(0,r.jsx)("span",{className:"text-white",children:"Find Path"})})}),(0,r.jsxs)("div",{className:"col-span-2 p-2text-gray-500 text-sm pt-3",children:[(0,r.jsx)("b",{className:"text-orange-400 text-lg",children:"Warning "}),"There could be duplicate paths, because each node is computed to show all its corresponding child dependents"]})]}),(0,r.jsx)("div",{className:"sm:col-span-3 rounded-lg",children:(0,r.jsx)("svg",{ref:h,className:"shadow-[0_3px_10px_rgb(0,0,0,0.2)] rounded-lg"})})]})})},h=function(e){let{actualJsonData:t,actuatorType:n,parentCallback:s}=e,[o,d]=(0,a.useState)("defaultTreeGraph"===n?"tree":"force"),h=p(n,t,o);function p(e,t,n){if("defaultForceDirectedGraph"===e||"defaultTreeGraph"===e)return t;if("actuatorBeansJson"===e){if("force"===n)return new l().convert(t);if("tree"===n)return new c().convert(t)}return{links:[],nodes:[]}}return(0,r.jsxs)("section",{children:[(0,r.jsxs)("section",{className:"grid grid-cols-12 m-2",children:[(0,r.jsx)("div",{className:"col-span-12 sm:col-span-10 p-2",children:(0,r.jsxs)("button",{onClick:function(e){console.log("Selected - "+e.target.id),("force"===e.target.id||"tree"===e.target.id)&&(h=p(n,t,e.target.id),d(e.target.id))},className:"relative group transition-all duration-200 focus:overflow-visible w-max h-max p-5 overflow-hidden flex flex-row items-center justify-center bg-white gap-2 rounded-lg border border-orange-400 hover:text-orange-700",children:[(0,r.jsx)("span",{children:"Select visualization"}),(0,r.jsx)("svg",{className:"rotate-90 group-focus:rotate-180",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{fill:"currentColor",d:"m12 10.8l-3.9 3.9q-.275.275-.7.275t-.7-.275q-.275-.275-.275-.7t.275-.7l4.6-4.6q.3-.3.7-.3t.7.3l4.6 4.6q.275.275.275.7t-.275.7q-.275.275-.7.275t-.7-.275z"})}),(0,r.jsxs)("div",{className:"absolute sm:m-16 shadow-lg -bottom-40 left-0 w-full h-max p-2 bg-orange-300 border border-orange-800 rounded-lg flex flex-col gap-2",children:[(0,r.jsx)("span",{id:"force",className:"flex flex-row gap-2 items-center hover:bg-zinc-100 p-2 rounded-lg",children:(0,r.jsx)("p",{id:"force",children:"Graph"})}),(0,r.jsx)("span",{id:"tree",className:"flex flex-row gap-2 items-center hover:bg-zinc-100 p-2 rounded-lg",children:(0,r.jsx)("p",{id:"tree",children:"Tree"})})]})]})}),(0,r.jsx)("div",{className:"col-span-12 sm:col-span-2 flex flex-col p-2",children:(0,r.jsx)("button",{className:"bg-orange-500 rounded-lg p-3",onClick:function(){s(void 0)},children:(0,r.jsx)("span",{className:"text-white",children:"Start Over"})})})]}),(0,r.jsx)("section",{className:"m-5",children:"force"===o?(0,r.jsx)(i,{jsonData:h}):"tree"===o?(0,r.jsx)(u,{convertedJsonData:h,actualJsonData:t}):void 0})]})};class p{isEmpty(e){return 0===e.length}twoOrMoreFile(e){return e.length>1}}class x extends p{validate(e){return this.isEmpty(e)?{isValid:!1,errorMessage:"No file provided"}:this.twoOrMoreFile(e)?{isValid:!1,errorMessage:"More than one file provided"}:this.isJson(e[0])?{isValid:!0}:{isValid:!1,errorMessage:"The file is not a JSON"}}isJson(e){return"application/json"===e.type}}let g=new x;class f{static isDefaultForceDirectedGraphTypeGuard(e){return"object"==typeof e&&"nodes"in e&&"links"in e}}class m{static isDefaultTreeGraphTypeGuard(e){return"object"==typeof e&&"name"in e&&m.checkChildren(e)}static checkChildren(e){return"children"in e}}class v{static isBeansJson(e){return"object"==typeof e&&null!==e&&"contexts"in e&&e.contexts instanceof Object&&Object.entries(e.contexts).length>0&&(new Map(Object.entries(e.contexts)).forEach((e,t)=>{if(!(e.beans instanceof Object))return!1}),!0)}}class j{static decide(e){let t="unknown";return f.isDefaultForceDirectedGraphTypeGuard(e)&&(t="defaultForceDirectedGraph"),v.isBeansJson(e)&&(t="actuatorBeansJson"),m.isDefaultTreeGraphTypeGuard(e)&&(t="defaultTreeGraph"),console.log("decided input json type - "+t,e),t}}function w(e){let{validationTypeFromParent:t,parentCallback:n}=e,[s,l]=(0,a.useState)(!1),o=(0,a.useRef)(null),[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)("");async function h(){var e;let r="json"===t?g.validate(i):{isValid:!1,errorMessage:"Invalid validation type"};if(r.isValid){let e=await p(i[0]);console.log("handleSubmitFile() - ",e),function(e){let t=j.decide(e);"unknown"===t?(c([]),u("Unsupported content attached, try spring beans json")):n(e,t)}(e)}else c([]),u(r.errorMessage)}let p=async e=>{let t=new FileReader;return new Promise((n,r)=>{t.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;try{let e=JSON.parse(a);n(e)}catch(e){console.error("Error parsing JSON:",e),r(e)}},t.onerror=e=>{console.error("Error reading file:",e),r(e)},t.readAsText(e)})};return(0,r.jsxs)("div",{className:"flex flex-col items-center m-4",children:[0===i.length&&(0,r.jsxs)("form",{onClick:function(){o.current.value="",o.current.click()},className:"".concat("bg-orange-50","  p-8 w-2/3 h-[60vh] rounded-lg text-center flex flex-col items-center justify-center cursor-pointer\n          hover:bg-orange-200 hover:text-neutral-100"),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),l(!0)},onSubmit:e=>e.preventDefault(),onDrop:function(e){var t;if(e.preventDefault(),e.stopPropagation(),l(!1),(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&e.dataTransfer.files[0])for(let t=0;t<e.dataTransfer.files.length;t++)c(n=>{var r;return[...n,null===(r=e.dataTransfer)||void 0===r?void 0:r.files[t]]})},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),l(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),l(!0)},children:[(0,r.jsx)("input",{placeholder:"fileInput",className:"hidden",ref:o,type:"file",multiple:!1,onChange:function(e){if(e.preventDefault(),console.log("File has been added"),u(""),e.target.files&&e.target.files[0]){console.log(e.target.files);for(let t=0;t<e.target.files.length;t++)c(n=>[...n,e.target.files[t]])}},accept:".json"}),(0,r.jsxs)("p",{className:"text-gray-500",children:["Drop your ",(0,r.jsx)("span",{className:"sm:text-6xl md:text-8xl animate-pulse hover:text-white",children:"Spring actuator beans"})," json here"]})]}),i.length>0&&(0,r.jsxs)("div",{className:"flex flex-col space-y-10 items-center",children:[(0,r.jsxs)("div",{children:["Ready to",(0,r.jsx)("span",{className:"text-2xl",children:" visualize"}),"?"]}),(0,r.jsx)("div",{children:(0,r.jsxs)("button",{type:"button",onClick:h,className:"text-white bg-orange-600 hover:bg-orange-800  focus:bg-orange-300  font-medium rounded-full text-sm p-2.5 text-center inline-flex items-center me-2 dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:bg-orange-800 animate-bounce",children:[(0,r.jsx)("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10",children:(0,r.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 5h12m0 0L9 1m4 4L9 9"})}),(0,r.jsx)("span",{className:"sr-only",children:"Visualize"})]})})]}),(null==d?void 0:d.length)>0&&(0,r.jsx)("div",{className:"bg-red-700 text-white opacity-50 rounded-xl p-2 mt-3 w-auto",children:d}),i.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-row space-x-5 mt-10",children:[(0,r.jsx)("span",{className:"text-neutral-500",children:e.name}),(0,r.jsx)("span",{className:"text-orange-500 cursor-pointer hover:text-red-300",onClick:()=>(function(e,t){let n=[...i];n.splice(t,1),c([]),c(n),u("")})(e.name,t),children:"remove"})]},t))]})}function b(){let[e,t]=(0,a.useState)(),[n,s]=(0,a.useState)("unknown");return(0,r.jsx)("main",{className:"flex flex-col min-h-[80vh] justify-center",children:(0,r.jsx)("section",{className:"",children:void 0===e?(0,r.jsx)(w,{validationTypeFromParent:"json",parentCallback:(e,n)=>{console.log("inside page dragNdrop callback"),console.log(e),s(n),t(e)}}):(0,r.jsx)(h,{actualJsonData:e,actuatorType:n,parentCallback:e=>{console.log("inside page canvas callback"),console.log(e),t(e)}})})})}}},function(e){e.O(0,[944,971,69,744],function(){return e(e.s=4447)}),_N_E=e.O()}]);