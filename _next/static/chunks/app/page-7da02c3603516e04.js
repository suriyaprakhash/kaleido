(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4447:function(e,r,t){Promise.resolve().then(t.bind(t,6661))},6661:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x}});var n=t(7437),a=t(2265);class o{}class s extends o{convert(e){let r=[],t=[];return new Map(Object.entries(e.contexts)).forEach((e,n)=>{let a=new Map(Object.entries(e.beans));a.forEach((e,o)=>{var s;r.push({id:o,group:n}),null===(s=e.dependencies)||void 0===s||s.forEach(e=>{a.get(e)&&a.get(o)?t.push({source:e,target:o,value:1}):console.error("Missing dependency node - "+e+" or bean Node -"+o)})})}),{links:t,nodes:r}}}var l=t(3611),i=e=>{let{jsonData:r}=e,[t,o]=(0,a.useState)(0),s=(0,a.useRef)(!1),[i,c]=(0,a.useState)(r),[d,u]=(0,a.useState)(""),f=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(console.log("use Effects called"),!s.current){var e;console.log("use Effects called - init"),null===(e=l.td_("svg g"))||void 0===e||e.remove(),function(e){let r=l.Ys(f.current);r.attr("width",1600).attr("height",800).attr("viewBox",[0,0,1600,800]).attr("style","max-width: 100%; height: auto");let t=l.PKp(l.Cn1),n=e.links.map(e=>({...e})),a=e.nodes.map(e=>({...e})),o=r.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll().data(n).join("line").attr("stroke-width",e=>Math.sqrt(e.value)),s=r.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll().data(a).join("circle").attr("r",5).attr("fill",e=>t(e.group));s.append("title").text(e=>e.id);let i=l.A4v(a).force("link",l.Fsl(n).id(e=>e.id)).force("charge",l.q5i()).force("center",l.wqt(800,400)).on("tick",function(){o.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),s.attr("cx",e=>e.x?e.x:0).attr("cy",e=>e.y?e.y:0)}),c=l.sPX();c.on("zoom",function(e){s.attr("transform",e.transform),o.attr("transform",e.transform)}),r.call(c).append("g");let d=l.ohM();d.on("start",e=>{e.active||i.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y}).on("drag",e=>{e.subject.fx=e.x,e.subject.fy=e.y}).on("end",e=>{e.active||i.alphaTarget(0),e.subject.fx=null,e.subject.fy=null}),s.call(d)}(i),s.current=!0}},[i]),(0,n.jsxs)("section",{className:"border-8 border-orange-600",children:[(0,n.jsx)("div",{children:"ForceDirectedGraph"}),(0,n.jsxs)("section",{className:"grid gap-4 border-8 border-red-100 p-2 sm:grid-cols-4",children:[(0,n.jsxs)("div",{className:"sm:col-span-1 border-4 border-green-800",children:[(0,n.jsx)("div",{className:"text-center",children:"Data Window"}),(0,n.jsxs)("p",{children:["Nodes found - ",i.nodes.length]}),(0,n.jsxs)("p",{children:["Links found - ",i.links.length]})]}),(0,n.jsx)("div",{className:"sm:col-span-2 border-4 border-green-800 rounded-lg",children:(0,n.jsx)("svg",{ref:f,className:"border-4 border-green-400 rounded-lg"})}),(0,n.jsxs)("div",{className:"sm:col-span-1 border-4 border-green-800 grid sm:grid-col-2 items-center",children:[(0,n.jsx)("div",{className:"text-center",children:"Search Window"}),(0,n.jsxs)("div",{className:"relative w-full h-16",children:[(0,n.jsx)("input",{className:"peer w-full h-full bg-transparent text-blue-gray-700 font-sans font-normal outline outline-0 focus:outline-0 disabled:bg-blue-gray-50 disabled:border-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 border focus:border-2 border-t-transparent focus:border-t-transparent text-sm px-3 py-2.5 rounded-[7px] border-blue-gray-200 focus:border-teal-500",placeholder:"",onChange:function(e){u(e.target.value)}}),(0,n.jsx)("label",{className:"flex w-full h-full select-none pointer-events-none absolute left-0 font-normal !overflow-visible truncate peer-placeholder-shown:text-blue-gray-500 leading-tight peer-focus:leading-tight peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500 transition-all -top-1.5 peer-placeholder-shown:text-sm text-[11px] peer-focus:text-[11px] before:content[' '] before:block before:box-border before:w-2.5 before:h-1.5 before:mt-[6.5px] before:mr-1 peer-placeholder-shown:before:border-transparent before:rounded-tl-md before:border-t peer-focus:before:border-t-2 before:border-l peer-focus:before:border-l-2 before:pointer-events-none before:transition-all peer-disabled:before:border-transparent after:content[' '] after:block after:flex-grow after:box-border after:w-2.5 after:h-1.5 after:mt-[6.5px] after:ml-1 peer-placeholder-shown:after:border-transparent after:rounded-tr-md after:border-t peer-focus:after:border-t-2 after:border-r peer-focus:after:border-r-2 after:pointer-events-none after:transition-all peer-disabled:after:border-transparent peer-placeholder-shown:leading-[3.75] text-blue-gray-400 peer-focus:text-teal-500 before:border-blue-gray-200 peer-focus:before:!border-teal-500 after:border-blue-gray-200 peer-focus:after:!border-teal-500",children:"Parent Node Search"})]}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)("button",{className:"bg-teal-600 rounded-lg p-5 w-full",onClick:function(e){let t=new Map;r.nodes.forEach(e=>t.set(e.id,e));let n=r.nodes.filter(e=>e.id.toLocaleLowerCase().includes(d.toLocaleLowerCase())).map(e=>e);if((null==n?void 0:n.length)>0){let e=r.links.filter(e=>n.filter(r=>e.source===r.id).length>0).map(e=>e),a=e.map(e=>t.get(e.target)),o=new Set;a.forEach(e=>{e&&o.add(e)}),n.forEach(e=>{o.add(e)}),c({nodes:Array.from(o),links:e}),s.current=!1}},children:(0,n.jsx)("span",{className:"p-2 text-white",children:"Filter"})})})]})]})]})},c=function(e){let{jsonData:r,actuatorType:t,parentCallback:a}=e,o="defaultForceDirectedGraph"===t?r:"actuatorBeansJson"===t?new s().convert(r):{links:[],nodes:[]};return(0,n.jsxs)("section",{children:[(0,n.jsx)("section",{className:"border-4 border-red-800",children:(0,n.jsxs)("div",{className:"border-4 border-red-600 flex flex-col",children:[(0,n.jsx)("h2",{children:"Canvas"}),"Determined actuator type ",t,(0,n.jsx)("div",{children:"Select visulaization to switch"}),(0,n.jsx)("button",{className:"bg-teal-600 rounded-lg p-5 w-auto",onClick:function(){a(void 0)},children:(0,n.jsx)("span",{className:"p-2 text-white",children:"Go Back"})})]})}),(0,n.jsx)(i,{jsonData:o})]})};class d{isEmpty(e){return 0===e.length}twoOrMoreFile(e){return e.length>1}}class u extends d{validate(e){return this.isEmpty(e)?{isValid:!1,errorMessage:"No file provided"}:this.twoOrMoreFile(e)?{isValid:!1,errorMessage:"More than one file provided"}:this.isJson(e[0])?{isValid:!0}:{isValid:!1,errorMessage:"The file is not a JSON"}}isJson(e){return"application/json"===e.type}}let f=new u;class p{static isDefaultForceDirectedGraphTypeGuard(e){return"object"==typeof e&&"nodes"in e&&"links"in e}}class b{static isBeansJson(e){return"object"==typeof e&&null!==e&&"contexts"in e&&e.contexts instanceof Object&&Object.entries(e.contexts).length>0&&(new Map(Object.entries(e.contexts)).forEach((e,r)=>{if(!(e.beans instanceof Object))return!1}),!0)}}class h{static decide(e){let r="unknown";return p.isDefaultForceDirectedGraphTypeGuard(e)&&(r="defaultForceDirectedGraph"),b.isBeansJson(e)&&(r="actuatorBeansJson"),console.log("decide",e),r}}function g(e){let{validationTypeFromParent:r,parentCallback:t}=e,[o,s]=(0,a.useState)(!1),l=(0,a.useRef)(null),[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)("");async function p(){var e;let n="json"===r?f.validate(i):{isValid:!1,errorMessage:"Invalid validation type"};if(n.isValid){let e=await b(i[0]);console.log("handleSubmitFile() - ",e),function(e){let r=h.decide(e);"unknown"===r?(c([]),u("The file passed is json however the content of the file is not supported and does not seem to be from actuator")):t(e,r)}(e)}else c([]),u(n.errorMessage)}let b=async e=>{let r=new FileReader;return new Promise((t,n)=>{r.onload=e=>{var r;let a=null===(r=e.target)||void 0===r?void 0:r.result;try{let e=JSON.parse(a);t(e)}catch(e){console.error("Error parsing JSON:",e),n(e)}},r.onerror=e=>{console.error("Error reading file:",e),n(e)},r.readAsText(e)})};return(0,n.jsxs)("div",{className:"flex flex-col items-center m-4",children:[(0,n.jsxs)("form",{className:"".concat(o?"bg-blue-400":"bg-blue-100","  p-8 w-2/3 rounded-lg  min-h-[20rem] sm:min-h-[40rem] text-center flex flex-col items-center justify-center \n          hover:bg-blue-200 hover:animate-pulse"),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),s(!0)},onSubmit:e=>e.preventDefault(),onDrop:function(e){var r;if(e.preventDefault(),e.stopPropagation(),s(!1),(null===(r=e.dataTransfer)||void 0===r?void 0:r.files)&&e.dataTransfer.files[0])for(let r=0;r<e.dataTransfer.files.length;r++)c(t=>{var n;return[...t,null===(n=e.dataTransfer)||void 0===n?void 0:n.files[r]]})},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),s(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),s(!0)},children:[(0,n.jsx)("input",{placeholder:"fileInput",className:"hidden",ref:l,type:"file",multiple:!1,onChange:function(e){if(e.preventDefault(),console.log("File has been added"),u(""),e.target.files&&e.target.files[0]){console.log(e.target.files);for(let r=0;r<e.target.files.length;r++)c(t=>[...t,e.target.files[r]])}},accept:".json"}),(0,n.jsx)("p",{onClick:function(){l.current.value="",l.current.click()},children:"Drag & Drop files or Select files to upload"})]}),(0,n.jsx)("button",{className:"bg-teal-600 rounded-lg p-5 mt-3 w-auto",onClick:p,children:(0,n.jsx)("span",{className:"p-2 text-white",children:"Process"})}),(null==d?void 0:d.length)==0?null:(0,n.jsx)("div",{className:"bg-red-700 text-white opacity-50 rounded-xl p-2 mt-3 w-auto",children:d}),i.map((e,r)=>(0,n.jsxs)("div",{className:"flex flex-row space-x-5",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsx)("span",{className:"text-red-500 cursor-pointer",onClick:()=>(function(e,r){let t=[...i];t.splice(r,1),c([]),c(t),u("")})(e.name,r),children:"remove"})]},r))]})}function x(){let[e,r]=(0,a.useState)(),[t,o]=(0,a.useState)("unknown");return(0,n.jsxs)("main",{className:"flex flex-col border-8 border-black",children:[(0,n.jsxs)("section",{className:"border-8 border-red-500",children:["MAIN - Visualize your spring dependencies",(0,n.jsx)("h1",{children:"data gogg - check not getting applied"})]}),void 0===e?(0,n.jsx)("section",{className:"border-8 border-red-300",children:(0,n.jsx)(g,{validationTypeFromParent:"json",parentCallback:(e,t)=>{console.log("inside page dragNdrop callback"),console.log(e),o(t),r(e)}})}):(0,n.jsx)("section",{children:(0,n.jsx)(c,{jsonData:e,actuatorType:t,parentCallback:e=>{console.log("inside page canvas callback"),console.log(e),r(e)}})})]})}}},function(e){e.O(0,[611,971,69,744],function(){return e(e.s=4447)}),_N_E=e.O()}]);