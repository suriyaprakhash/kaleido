(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4447:function(e,t,r){Promise.resolve().then(r.bind(r,6661))},6661:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(7437),s=r(2265);class a{}class o extends a{convert(e){let t=[],r=[];return new Map(Object.entries(e.contexts)).forEach((e,n)=>{let s=new Map(Object.entries(e.beans));s.forEach((e,a)=>{var o;t.push({id:a,group:n}),null===(o=e.dependencies)||void 0===o||o.forEach(e=>{s.get(e)&&s.get(a)?r.push({source:e,target:a,value:1}):console.error("Missing dependency node - "+e+" or bean Node -"+a)})})}),{links:r,nodes:t}}}var l=r(5315),i=e=>{let{jsonData:t}=e,[r,a]=(0,s.useState)(0),o=(0,s.useRef)(!1),i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{console.log("use Effects called"),o.current||(console.log("use Effects called - init"),function(e){let t=l.Ys(i.current),r=t.node(),n=(null==r?void 0:r.clientWidth)?null==r?void 0:r.clientWidth:0,s=(null==r?void 0:r.clientHeight)?null==r?void 0:r.clientHeight:0;t.attr("width",n).attr("height",s).attr("viewBox",[0,0,n,s]).attr("style","max-width: 100%; height: auto");let a=l.PKp(l.Cn1),o=e.links.map(e=>({...e})),c=e.nodes.map(e=>({...e})),d=t.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll().data(o).join("line").attr("stroke-width",e=>Math.sqrt(e.value)),u=t.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll().data(c).join("circle").attr("r",5).attr("fill",e=>a(e.group));u.append("title").text(e=>e.id);let f=l.A4v(c).force("link",l.Fsl(o).id(e=>e.id)).force("charge",l.q5i()).force("center",l.wqt(n/2,s/2)).on("tick",function(){d.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),u.attr("cx",e=>e.x?e.x:0).attr("cy",e=>e.y?e.y:0)}),p=l.sPX();p.on("zoom",function(e){u.attr("transform",e.transform),d.attr("transform",e.transform)}),t.call(p).append("g");let h=l.ohM();h.on("start",e=>{e.active||f.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y}).on("drag",e=>{e.subject.fx=e.x,e.subject.fy=e.y}).on("end",e=>{e.active||f.alphaTarget(0),e.subject.fx=null,e.subject.fy=null}),u.call(h),t.node()}(t),o.current=!0)},[t]),(0,n.jsxs)("section",{children:[(0,n.jsx)("div",{children:"ForceDirectedGraph"}),(0,n.jsx)("section",{className:"flex flex-col border-8 border-red-100 p-2 text-center items-center",children:(0,n.jsx)("svg",{ref:i,className:"border-4 border-green-800 md:w-[800px] sm:h-[800px]"})}),(0,n.jsx)("section",{className:"border-8 border-red-400 p-2",children:(0,n.jsxs)("div",{className:"text-center items-center",children:[(0,n.jsxs)("p",{children:["Click counter - You clicked ",r," times"]}),(0,n.jsx)("button",{onClick:()=>a(r+1),children:"Click me"})]})})]})},c=function(e){let{jsonData:t,actuatorType:r,parentCallback:s}=e,a="defaultForceDirectedGraph"===r?t:"actuatorBeansJson"===r?new o().convert(t):{links:[],nodes:[]};return(0,n.jsxs)("section",{children:[(0,n.jsxs)("section",{className:"border-4 border-red-800 py-3 w-svw",children:["Menu bar section",(0,n.jsx)("div",{className:"float-right border-4 border-red-600  hover:animate-bounce",children:(0,n.jsx)("button",{onClick:function(){s(void 0)},children:"Go Back"})})]}),(0,n.jsxs)("section",{className:"flex flex-col items-center",children:[(0,n.jsx)("h2",{children:"Canvas"}),"Determined actuator type ",r]}),(0,n.jsx)(i,{jsonData:a})]})};class d{isEmpty(e){return 0===e.length}twoOrMoreFile(e){return e.length>1}}class u extends d{validate(e){return this.isEmpty(e)?{isValid:!1,errorMessage:"No file provided"}:this.twoOrMoreFile(e)?{isValid:!1,errorMessage:"More than one file provided"}:this.isJson(e[0])?{isValid:!0}:{isValid:!1,errorMessage:"The file is not a JSON"}}isJson(e){return"application/json"===e.type}}let f=new u;class p{static isDefaultForceDirectedGraphTypeGuard(e){return"object"==typeof e&&"nodes"in e&&"links"in e}}class h{static isBeansJson(e){return"object"==typeof e&&null!==e&&"contexts"in e&&e.contexts instanceof Object&&Object.entries(e.contexts).length>0&&(new Map(Object.entries(e.contexts)).forEach((e,t)=>{if(!(e.beans instanceof Object))return!1}),!0)}}class x{static decide(e){let t="unknown";return p.isDefaultForceDirectedGraphTypeGuard(e)&&(t="defaultForceDirectedGraph"),h.isBeansJson(e)&&(t="actuatorBeansJson"),console.log("decide",e),t}}function g(e){let{validationTypeFromParent:t,parentCallback:r}=e,[a,o]=(0,s.useState)(!1),l=(0,s.useRef)(null),[i,c]=(0,s.useState)([]),[d,u]=(0,s.useState)("");async function p(){var e;let n="json"===t?f.validate(i):{isValid:!1,errorMessage:"Invalid validation type"};if(n.isValid){let e=await h(i[0]);console.log("handleSubmitFile() - ",e),function(e){let t=x.decide(e);"unknown"===t?(c([]),u("The file passed is json however the content of the file is not supported and does not seem to be from actuator")):r(e,t)}(e)}else c([]),u(n.errorMessage)}let h=async e=>{let t=new FileReader;return new Promise((r,n)=>{t.onload=e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;try{let e=JSON.parse(s);r(e)}catch(e){console.error("Error parsing JSON:",e),n(e)}},t.onerror=e=>{console.error("Error reading file:",e),n(e)},t.readAsText(e)})};return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsxs)("form",{className:"".concat(a?"bg-blue-400":"bg-blue-100","  p-8 w-2/3 rounded-lg  min-h-[10rem] text-center flex flex-col items-center justify-center \n          hover:bg-blue-200 hover:animate-pulse"),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),o(!0)},onSubmit:e=>e.preventDefault(),onDrop:function(e){var t;if(e.preventDefault(),e.stopPropagation(),o(!1),(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&e.dataTransfer.files[0])for(let t=0;t<e.dataTransfer.files.length;t++)c(r=>{var n;return[...r,null===(n=e.dataTransfer)||void 0===n?void 0:n.files[t]]})},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),o(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),o(!0)},children:[(0,n.jsx)("input",{placeholder:"fileInput",className:"hidden",ref:l,type:"file",multiple:!1,onChange:function(e){if(e.preventDefault(),console.log("File has been added"),u(""),e.target.files&&e.target.files[0]){console.log(e.target.files);for(let t=0;t<e.target.files.length;t++)c(r=>[...r,e.target.files[t]])}},accept:".json"}),(0,n.jsx)("p",{onClick:function(){l.current.value="",l.current.click()},children:"Drag & Drop files or Select files to upload"})]}),(0,n.jsx)("button",{className:"bg-teal-600 rounded-lg p-5 mt-3 w-auto",onClick:p,children:(0,n.jsx)("span",{className:"p-2 text-white",children:"Process"})}),(null==d?void 0:d.length)==0?null:(0,n.jsx)("div",{className:"bg-red-700 text-white opacity-50 rounded-xl p-2 mt-3 w-auto",children:d}),i.map((e,t)=>(0,n.jsxs)("div",{className:"flex flex-row space-x-5",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsx)("span",{className:"text-red-500 cursor-pointer",onClick:()=>(function(e,t){let r=[...i];r.splice(t,1),c([]),c(r),u("")})(e.name,t),children:"remove"})]},t))]})}function m(){let[e,t]=(0,s.useState)(),[r,a]=(0,s.useState)("unknown");return(0,n.jsxs)("main",{className:"flex flex-col border-8 border-blue-500 items-center",children:[(0,n.jsxs)("section",{className:"border-8 border-red-500 text-center items-center",children:["Visualize your spring dependencies",(0,n.jsx)("h1",{children:"data gogg - check not getting applied"})]}),void 0===e?(0,n.jsx)("section",{className:"border-8 border-red-300 max-w-lg p-3",children:(0,n.jsx)(g,{validationTypeFromParent:"json",parentCallback:(e,r)=>{console.log("inside page dragNdrop callback"),console.log(e),a(r),t(e)}})}):(0,n.jsx)("section",{children:(0,n.jsx)(c,{jsonData:e,actuatorType:r,parentCallback:e=>{console.log("inside page canvas callback"),console.log(e),t(e)}})})]})}}},function(e){e.O(0,[315,971,69,744],function(){return e(e.s=4447)}),_N_E=e.O()}]);